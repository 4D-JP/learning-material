  //%attributes = {"invisible":true,"lang":"en"} comment added and reserved by 4D.C_TEXT:C284($1;$q)$q:=$1If ($q="")		Form:C1466.peopleA.currentCollection:=Form:C1466.people.all	Form:C1466.peopleA.queryPlan:=""	Form:C1466.peopleA.queryPath:=""	Else 		C_COLLECTION:C1488($words)	$words:=Split string:C1554(Replace string:C233($q;"@";"";*);" ";sk diacritical:K86:3 | sk trim spaces:K86:2 | sk diacritical:K86:3)		C_OBJECT:C1216($querySettings)	$querySettings:=New object:C1471("queryPlan";True:C214;"queryPath";True:C214;"parameters";New collection:C1472)		$i:=1	C_TEXT:C284($operator)	$operator:=Choose:C955(Form:C1466.peopleA.and=1;" and ";" or ")	$searchCriteriaTemplate:="(firstName = :n or lastName = :n or firstNameYomi = :n or lastNameYomi = :n)"	$searchCriteria:=""		C_TEXT:C284($word)	For each ($word;$words)		$searchCriteria:=$searchCriteria+Choose:C955($i=1;"";$operator)+Replace string:C233($searchCriteriaTemplate;":n";":"+String:C10($i);*)		$querySettings.parameters.push("@"+$word+"@")		$i:=$i+1	End for each 		C_OBJECT:C1216($currentCollection)	$currentCollection:=ds:C1482.People\		.query($searchCriteria;$querySettings)		Form:C1466.peopleA.queryPlan:=$currentCollection.queryPlan	Form:C1466.peopleA.queryPath:=$currentCollection.queryPath		Form:C1466.peopleA.currentCollection:=\		$currentCollection.orderBy("lastNameYomi")	End if 